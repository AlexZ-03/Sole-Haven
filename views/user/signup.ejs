<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="my-css/style.css" type="text/css">
</head>
<body>

<div class="signup-container">
    <h2 class="signup-header">Create an Account</h2>
    <form id="signform" action="/signup" method="POST">
        <div class="form-group">
            <label for="fullName">Full Name</label>
            <input type="text" class="form-control" id="name" name="name">
            <div class="error-message" id="error-name">
            </div>
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" class="form-control" id="email" name="email">
            <div class="error-message" id="error-email">
            </div>
        </div>
        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" class="form-control" id="phone" name="phone">
            <div class="error-message" id="error-phone">
            </div>
        </div>
        <div class="form-group">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" name="password">
            <div class="error-message" id="error-password">
            </div>
        </div>
        <div class="form-group">
            <label for="confirmPassword">Confirm Password</label>
            <input type="password" class="form-control" id="conformPassword" name="conformPassword">
            <div class="error-message" id="error-conformPassword">
            </div>
        </div>
        <button type="submit" class="btn btn-primary btn-block">Sign Up</button>
    </form>

    <div class="login-option">
        <p>Or</p>
        <button class="btn google-login">
            <i class="fab fa-google"></i> Sign Up with Google
        </button>
        <p class="mt-2">Already have an account? <a href="/login">Log In</a></p>
    </div>
</div>

<!-- Optional JavaScript and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    const nameid = document.getElementById('name');
    const emailid = document.getElementById('email');
    const phoneid = document.getElementById('phone');
    const passid = document.getElementById('password');
    const cpassid = document.getElementById('conformPassword'); // Corrected ID reference

    const errorName = document.getElementById('error-name');
    const errorEmail = document.getElementById('error-email');
    const errorPhone = document.getElementById('error-phone');
    const errorPass = document.getElementById('error-password');
    const errorCpass = document.getElementById('error-conformPassword'); // Corrected ID reference

    const signform = document.getElementById('signform');

    function nameValidate() {
        errorName.style.display = "none";
        errorName.innerHTML = "";

        const nameValue = nameid.value;
        const namePattern = /^[A-Za-z\s]+$/;

        if (nameValue.trim() === "") {
            errorName.style.display = "block";
            errorName.innerHTML = "Please enter a valid name";
            console.log("Name validation failed: Empty name");
        } else if (!namePattern.test(nameValue)) {
            errorName.style.display = "block";
            errorName.innerHTML = "Name can only contain alphabets";
            console.log("Name validation failed: Invalid characters");
        } else {
            errorName.style.display = "none";
            errorName.innerHTML = "";
        }
    }

    function emailValidate() {
        errorEmail.style.display = "none";
        errorEmail.innerHTML = "";

        const emailValue = emailid.value;
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if (emailValue.trim() === "") {
            errorEmail.style.display = "block";
            errorEmail.innerHTML = "Please enter a valid email";
            console.log("Email validation failed: Empty email");
        } else if (!emailPattern.test(emailValue)) {
            errorEmail.style.display = "block";
            errorEmail.innerHTML = "Invalid email format";
            console.log("Email validation failed: Invalid format");
        } else {
            errorEmail.style.display = "none";
        }
    }

    function phoneValidate() {
        errorPhone.style.display = "none";
        errorPhone.innerHTML = "";

        const phoneValue = phoneid.value;
        const phonePattern = /^[0-9]{10}$/;

        if (phoneValue.trim() === "") {
            errorPhone.style.display = "block";
            errorPhone.innerHTML = "Please enter a phone number";
            console.log("Phone validation failed: Empty phone number");
        } else if (!phonePattern.test(phoneValue)) {
            errorPhone.style.display = "block";
            errorPhone.innerHTML = "Phone number must be 10 digits";
            console.log("Phone validation failed: Invalid format");
        } else {
            errorPhone.style.display = "none";
        }
    }

    function passValidate() {
        errorPass.style.display = "none";
        errorPass.innerHTML = "";

        const passValue = passid.value;
        const passPattern = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

        if (passValue.length < 8) {
            errorPass.style.display = "block";
            errorPass.innerHTML = "Password must be at least 8 characters";
            console.log("Password validation failed: Too short");
        } else if (!passPattern.test(passValue)) {
            errorPass.style.display = "block";
            errorPass.innerHTML = "Password must contain at least one letter, one number, and one special character";
            console.log("Password validation failed: Does not meet criteria");
        } else {
            errorPass.style.display = "none";
        }
    }

    function confirmPassValidate() {
        errorCpass.style.display = "none";
        errorCpass.innerHTML = "";

        const passValue = passid.value;
        const cpassValue = cpassid.value;

        if (cpassValue !== passValue) {
            errorCpass.style.display = "block";
            errorCpass.innerHTML = "Passwords do not match";
            console.log("Confirm password validation failed: Passwords do not match");
        } else {
            errorCpass.style.display = "none";
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        signform.addEventListener('submit', (e) => {
            nameValidate();
            emailValidate();
            phoneValidate();
            passValidate();
            confirmPassValidate();

            if (errorName.innerHTML || 
                errorEmail.innerHTML || 
                errorPhone.innerHTML || 
                errorPass.innerHTML || 
                errorCpass.innerHTML) {
                    console.log("Form submission prevented due to validation errors.");
                    e.preventDefault(); // Stop form submission if there are errors
            }
        });
    });
</script>

</body>
</html>
